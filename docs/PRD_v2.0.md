# 产品需求文档 (PRD v2.0)

**文档版本**: 2.0
**最后更新**: 2025-01-28
**产品名称**: AI 驱动的动态候选人画像系统

---

## 一、产品愿景与定位

### 1.1 产品愿景
构建一个**AI 驱动的动态候选人画像系统**，通过持续积累面试信息，为招聘团队提供越来越精准的候选人洞察，最终实现：
1. **数据驱动的招聘决策** - 用 AI 提升决策质量和效率
2. **高质量候选人资产沉淀** - 为公司积累长期的人才资产库

### 1.2 产品定位
- **类型**：企业内部 AI 招聘协作平台
- **核心差异化**：动态演进的候选人画像，而非静态简历分析
- **目标场景**：中大型企业的多轮技术/管理岗位招聘流程

### 1.3 核心价值主张
> "让每一轮面试都让我们更懂候选人，让每一个决策都有 AI 洞察支持"

---

## 二、用户角色与权限

### 2.1 角色定义

| 角色 | 人数 | 主要职责 | 系统权限 |
|-----|------|---------|---------|
| **招聘专员 (Recruiter)** | 多人 | 候选人管理、面试协调、流程推进 | 创建候选人、安排面试、查看所有数据 |
| **招聘负责人 (Recruitment Lead)** | 1-2人 | 招聘流程管理、团队协调、进度把控 | 全部 Recruiter 权限 + 团队管理 + 流程监控 |
| **Hiring Manager** | 2-3人 | 业务面试、候选人评估、最终决策 | 查看候选人画像、提交面试评价、做出录用决策 |

### 2.2 角色工作流

```
招聘专员
  ↓ 创建候选人 & 上传简历
  ↓ AI 生成初始画像 (基于简历)
  ↓ 安排第一轮面试
  ↓
Hiring Manager (第一轮)
  ↓ 查看 AI 准备的面试建议
  ↓ 进行面试 & 提交评价
  ↓ AI 更新候选人画像 v2
  ↓
招聘专员
  ↓ 审核第一轮结果
  ↓ 安排第二轮面试
  ↓
Hiring Manager (第二轮)
  ↓ 查看更新的画像 & AI 追问建议
  ↓ 进行面试 & 提交评价
  ↓ AI 更新候选人画像 v3
  ↓
招聘负责人
  ↓ 协调各方意见
  ↓
Hiring Manager (最终决策人)
  ↓ 查看 AI 综合建议
  ↓ 做出最终录用决策
```

---

## 三、核心功能详细设计

### 3.1 功能优先级矩阵

| 功能模块 | 优先级 | MVP 包含 | 说明 |
|---------|--------|---------|------|
| **AI 动态画像构建** | P0 | ✅ | 核心差异化能力 |
| **AI 面试洞察生成** | P0 | ✅ | 核心差异化能力 |
| 用户认证与权限 | P0 | ✅ | 基础设施 |
| 候选人详情页 | P0 | ✅ | 主要操作界面 |
| 面试创建与管理 | P0 | ✅ | 核心流程 |
| 简历自动解析 | P1 | ✅ | 已有基础，优化即可 |
| 招聘决策支持 | P1 | ⚠️ | MVP 简化版 |
| 职位管理 | P1 | ⚠️ | MVP 简化版 |
| 文化价值观评估 | P2 | ❌ | 二期开发 |
| 报告与分析 | P2 | ❌ | 二期开发 |

---

### 3.2 核心功能 #1：AI 动态画像构建

#### 功能描述
随着招聘流程推进，AI 持续整合新信息，构建越来越丰富、准确的候选人画像。

#### 画像演进示例

**阶段 0：初始画像（基于简历）**
```json
{
  "version": 1,
  "stage": "resume",
  "dataSource": ["resume"],
  "profile": {
    "technicalSkills": {
      "list": ["Python", "React", "AWS"],
      "confidence": "medium"
    },
    "experience": {
      "years": 5,
      "roles": ["Senior Developer", "Tech Lead"],
      "confidence": "high"
    },
    "softSkills": {
      "communication": "unknown",
      "leadership": "inferred from titles",
      "confidence": "low"
    },
    "overallMatch": {
      "score": 72,
      "reasoning": "Strong technical background, limited behavioral data"
    }
  },
  "gaps": [
    "Communication style unclear",
    "Leadership experience not validated",
    "Cultural fit unassessed"
  ]
}
```

**阶段 1：第一轮面试后**
- 技术能力验证
- 软技能初步评估
- 匹配度提升至 78 分

**阶段 2：第二轮面试后（行为面试）**
- 团队协作能力确认
- 文化匹配度评估
- 匹配度提升至 86 分
- AI 给出招聘建议

#### AI 画像更新触发时机
1. 简历上传完成后 → 生成初始画像
2. 每轮面试评价提交后 → 更新画像
3. 手动触发（调试用）

---

### 3.3 核心功能 #2：AI 面试洞察生成

#### 功能描述
在每轮面试前，AI 基于候选人当前画像，为面试官生成：
1. 建议追问的问题（5-7个）
2. 需要重点考察的领域（3-5个）
3. 前几轮未充分覆盖的点
4. 候选人的优势和潜在顾虑

#### 生成内容结构

```json
{
  "candidateContext": {
    "summary": "简短总结候选人当前状态",
    "currentScore": 78,
    "strengths": ["已验证的优势"],
    "concerns": ["需要关注的点"]
  },
  "suggestedQuestions": [
    {
      "question": "具体问题",
      "purpose": "评估什么能力",
      "probing": "追问方向"
    }
  ],
  "focusAreas": [
    {
      "area": "重点领域",
      "why": "为什么重要",
      "signals": ["正面信号", "负面信号"]
    }
  ],
  "previousGaps": ["前几轮未覆盖的点"],
  "interviewerTips": ["给面试官的提示"]
}
```

#### 生成时机
1. 创建面试时自动生成
2. 面试前手动刷新
3. 候选人画像更新后自动更新

---

### 3.4 核心功能 #3：面试记录管理

#### 面试流程

```
1. 创建面试
   └─ AI 自动生成面试准备材料

2. 面试准备
   └─ 面试官查看候选人画像和 AI 建议

3. 进行面试
   └─ 支持三种方式记录

4. 提交面试评价
   ├─ 上传面试记录（文本/录音/转录文件）
   ├─ 填写结构化评价
   └─ 提交建议

5. AI 更新画像
   └─ 通知相关人员
```

#### 面试记录的三种方式

**方式 1: 手动输入**
- 面试官直接在文本框中输入
- 最简单，无需额外工具

**方式 2: 上传已转录文本**
- 上传 .txt, .doc, .docx 文件
- 利用现有工具

**方式 3: 上传录音（二期）**
- 上传音频文件
- 系统调用语音转文字服务
- 处理时间较长

---

### 3.5 核心功能 #4：招聘决策支持

#### 决策流程

```
1. 招聘专员触发 "准备决策"
2. AI 生成综合分析报告
3. 招聘负责人审核
4. Hiring Manager 最终决策
5. 系统记录决策结果
```

#### AI 决策建议内容

1. 整体建议（Strong Hire / Hire / Hold / No Hire）
2. 置信度（high/medium/low）
3. 详细推理
4. 画像演进分析
5. 优势和顾虑总结
6. 风险评估
7. 面试官意见汇总
8. 入职计划建议（如果推荐录用）

---

## 四、技术架构设计

### 4.1 系统架构

```
Frontend (Vercel)
  ↓ REST API + WebSocket
Backend (Vercel Serverless)
  ├─ API Routes
  ├─ AI Services
  └─ Collaboration
       ↓           ↓
  Supabase    OpenRouter
  (PostgreSQL)  (Gemini 2.5)
```

### 4.2 数据库扩展

**新增表（4个）**

1. `candidate_profiles` - 候选人画像历史
2. `interview_preparations` - 面试准备建议
3. `hiring_decisions` - 招聘决策记录
4. 扩展 `interviews` - 添加转录字段

### 4.3 AI 服务架构

```typescript
CandidateProfileService {
  buildInitialProfile()        // 构建初始画像
  updateProfileWithInterview() // 更新画像
  generateInterviewPreparation() // 生成面试准备
  generateHiringRecommendation() // 生成决策建议
  getProfileEvolution()        // 获取演进历史
}
```

### 4.4 安全与权限

- Supabase Row Level Security (RLS)
- 基于角色的访问控制 (RBAC)
- 敏感数据加密
- 审计日志

---

## 五、MVP 范围界定

### MVP 包含功能（阶段 0-2）

✅ **必须有**
1. 用户认证（Supabase Auth）
2. 三角色权限系统
3. 候选人 CRUD + 简历解析
4. AI 动态画像构建
5. 面试 CRUD + 评价提交
6. AI 面试洞察生成
7. 候选人详情页（画像演进）
8. 面试准备页

⚠️ **简化版**
1. 职位管理（只保留基本 CRUD）
2. 决策支持（只有 AI 建议，不做复杂投票）
3. 面试转录（只支持手动输入和上传文本）

❌ **暂不包含**
1. 文化价值观评估框架（二期）
2. 语音自动转录（二期）
3. 报告和分析（二期）
4. 候选人导入/导出（二期）
5. 高级搜索和筛选（二期）

---

## 六、成功指标

### 6.1 产品指标

| 指标 | 目标 | 测量方式 |
|-----|------|---------|
| 画像准确度提升 | 每轮面试后匹配度变化 > 5分 | 对比初始画像和最终画像 |
| AI 建议采纳率 | > 70% | 统计面试官使用 AI 建议问题的比例 |
| 决策时间缩短 | 减少 30% | 对比使用前后的决策周期 |
| 候选人库质量 | 最终入库候选人平均分 > 80 | 统计 hired 候选人的平均画像分数 |
| 用户满意度 | NPS > 50 | 季度用户调研 |

### 6.2 技术指标

| 指标 | 目标 | 测量方式 |
|-----|------|---------|
| API 响应时间 | P95 < 500ms | APM 监控 |
| AI 服务响应时间 | P95 < 3s | 专项监控 |
| 页面加载时间 | LCP < 2.5s | Lighthouse |
| 系统可用性 | 99.5% | Uptime 监控 |

---

## 七、后续迭代计划（二期）

### 二期 A (1-2 周)
- 文化价值观评估框架集成
- 语音自动转录（集成 Whisper API）
- 报告和分析页面
- 候选人导入/导出

### 二期 B (2-3 周)
- 高级搜索和筛选
- 面试日程管理（日历集成）
- Email 通知自动化
- 移动端适配

### 二期 C (长期)
- 候选人推荐算法优化
- 历史数据分析和洞察
- 招聘流程模板
- 与 ATS 系统集成