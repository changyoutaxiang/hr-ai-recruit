# 🚀 快速开始指南

## 📋 需要你完成的操作清单

### ✅ 第 1 步：在 Supabase 中执行数据库脚本

1. 打开 Supabase: https://supabase.com/dashboard/project/ndpryzqiwhndlokmjouo
2. 点击左侧 **SQL Editor**
3. 点击 **New Query**
4. 打开文件 `/migrations/001_initial_schema.sql`
5. 复制全部内容，粘贴到 SQL Editor
6. 点击 **Run** 执行

**预期结果**: 应该创建 12 张表，没有错误

---

### ✅ 第 2 步：创建测试用户

在 **Authentication > Users** 中创建 3 个测试用户：

| Email | 临时密码 |
|-------|---------|
| `recruiter@test.com` | `Test123456!` |
| `lead@test.com` | `Test123456!` |
| `hiring@test.com` | `Test123456!` |

然后在 SQL Editor 中执行：

```sql
-- 设置用户角色
UPDATE users SET role = 'recruiter' WHERE email = 'recruiter@test.com';
UPDATE users SET role = 'recruitment_lead' WHERE email = 'lead@test.com';
UPDATE users SET role = 'hiring_manager' WHERE email = 'hiring@test.com';
```

---

### ✅ 第 3 步：创建 Storage Buckets

在 **Storage** 中创建两个 bucket:

1. **resumes**
   - Public: No
   - File size limit: 10 MB

2. **interview-recordings**
   - Public: No
   - File size limit: 50 MB

---

### ✅ 第 4 步：配置 Storage Policies

对每个 bucket，在 **Policies** 中添加：

**resumes bucket:**
```sql
-- SELECT
CREATE POLICY "Users can read resumes"
ON storage.objects FOR SELECT TO authenticated
USING (bucket_id = 'resumes');

-- INSERT
CREATE POLICY "Users can upload resumes"
ON storage.objects FOR INSERT TO authenticated
WITH CHECK (bucket_id = 'resumes');

-- DELETE
CREATE POLICY "Recruiters can delete resumes"
ON storage.objects FOR DELETE TO authenticated
USING (
  bucket_id = 'resumes' AND
  auth.jwt() ->> 'role' IN ('recruiter', 'recruitment_lead')
);
```

**interview-recordings bucket:**（相同模式，替换 bucket 名称）

---

### ✅ 第 5 步：获取数据库密码并更新 .env

1. 在 Supabase 中: **Project Settings** > **Database**
2. 找到 **Connection string** (Pooler 模式)
3. 复制连接字符串，格式：
   ```
   postgresql://postgres.ndpryzqiwhndlokmjouo:[YOUR-PASSWORD]@aws-0-us-east-1.pooler.supabase.com:6543/postgres
   ```
4. 打开项目中的 `.env` 文件
5. 将 `DATABASE_URL` 的 `[YOUR-PASSWORD]` 替换为实际密码

---

## 🎉 完成后测试

在项目根目录运行：

```bash
# 安装依赖
npm install

# 启动开发服务器
npm run dev
```

访问 http://localhost:5000

尝试用测试账号登录：
- Email: `recruiter@test.com`
- Password: `Test123456!`

---

## 🐛 遇到问题？

### 数据库连接失败
- 检查 `.env` 中的 `DATABASE_URL` 密码是否正确
- 确保使用 Pooler connection string

### 登录失败
- 检查用户是否创建成功
- 检查 users 表中角色是否设置正确

### 文件上传失败
- 检查 Storage buckets 是否创建
- 检查 Storage policies 是否正确

---

## 📚 详细文档

- [Supabase 配置指南](/docs/Supabase配置指南.md)
- [产品需求文档](/docs/PRD_v2.0.md)
- [开发规划](/docs/开发规划.md)

---

## 🔥 准备好了？告诉我！

完成以上步骤后，告诉我结果：
1. 数据库表创建成功 ✅
2. 测试用户创建成功 ✅
3. Storage buckets 配置完成 ✅
4. 本地开发服务器启动成功 ✅

我将继续下一步：**实现认证系统**